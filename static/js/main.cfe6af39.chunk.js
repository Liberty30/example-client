(this["webpackJsonpfoodee-client"]=this["webpackJsonpfoodee-client"]||[]).push([[0],{417:function(e,t,n){e.exports=n(829)},437:function(e,t){},459:function(e,t){},461:function(e,t){},535:function(e,t){},537:function(e,t){},546:function(e,t){},548:function(e,t){},573:function(e,t){},579:function(e,t){},592:function(e,t){},614:function(e,t){},829:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(52),i=n.n(o),c=n(51),s=n(1),u=n.n(s),l=n(27),f=n(409),d=(n(422),n(92)),A=n.n(d),p=n(402),m=n.n(p),v=n(242),g=n.n(v),h=n(841),b=n(157),E=function(){return Object(b.b)()},O=b.c,w=n(85),y=n(120),L=n.n(y),N=window.ethereum;N&&(N.autoRefreshOnNetworkChange=!1);var k,j=N,C=new L.a(j),_=function(){return Boolean(null===j||void 0===j?void 0:j.isMetaMask)},x=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===j||void 0===j?void 0:j.request({method:"eth_requestAccounts"});case 2:if(t=e.sent){e.next=5;break}throw new Error("Metamask not installed");case 5:return e.abrupt("return",t.result?t.result[0]:t[0]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F={icon:"https://cdn.iconscout.com/icon/free/png-512/metamask-2728406-2261817.png",login:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_()){e.next=2;break}throw new Error("Metamask not installed");case 2:return e.abrupt("return",x());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:function(){},reload:function(){},getAddress:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getWeb3:function(){return function(){if(!_())throw new Error("Metamask not installed");return C}()}},S=n(397),B=n.n(S),P={},I={theme:{isDark:!1,colors:{torusBrand1:"#000000",torusGray2:"#FBF7F3"}},logoDark:"https://avatars.githubusercontent.com/u/78103996?s=200&v=4",logoLight:"https://avatars.githubusercontent.com/u/78103996?s=200&v=4"},Q={web3:new L.a,torus:null,initialized:!1,setweb3:function(e){var t=new L.a(e);Q.web3=t,this.web3.setProvider(e)},initialize:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new B.a(P),e.next=3,n.init({buildEnv:"testing",network:{host:"http://localhost:8545",chainId:Number("1337")||1337,networkName:"Localchain"},showTorusButton:!0,whiteLabel:I});case 3:return this.initialized=!0,e.prev=4,e.next=7,n.login({verifier:void 0});case 7:Q.setweb3(n.provider),Q.torus=n,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(4),n.clearInit(),this.initialized=!1,new Error("Login Cancelled");case 16:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()},T=Q,U=["google","reddit","discord"],q=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.initialize(t||"production");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){return T.initialized},M=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=T.torus)||void 0===t?void 0:t.getUserInfo("This site is requesting your information");case 2:if(n=e.sent){e.next=5;break}throw new Error("Unable to find user's info");case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=T.torus)||void 0===r?void 0:r.getPublicAddress({verifier:t,verifierId:n,isExtended:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n,r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:return t=e.sent,n=t.verifier,r=t.verifierId,a=K(n),e.next=8,V(a,r);case 8:if(o=e.sent){e.next=11;break}throw new Error("No Wallet Address found for User");case 11:if("string"!==typeof o){e.next=13;break}return e.abrupt("return",o);case 13:return e.abrupt("return",o.address);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(e){var t=U.find((function(t){return e.includes(t)}));if(!t)throw new Error("Unknown Verifier");return t},D={icon:"data:image/jpeg;base64,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",login:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:return e.next=4,W();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:function(){R()&&function(){var e;null===(e=T.torus)||void 0===e||e.cleanUp().then((function(){sessionStorage.setItem("pageUsingTorus","false")}))}()},reload:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,q();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAddress:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getWeb3:function(){return T.web3}};!function(e){e.NONE="NONE",e.TORUS="TORUS",e.METAMASK="METAMASK"}(k||(k={}));var G,H,z,Y,J=function(e){switch(e){case k.NONE:return X;case k.TORUS:return D;case k.METAMASK:return F}},X={icon:"https://icons.veryicon.com/png/o/business/business-style-icon/wallet-62.png",login:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,"";case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:function(){},reload:function(){},getAddress:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,"";case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getWeb3:function(){return new L.a}},Z=function(){try{var e=sessionStorage.getItem("session");return e?JSON.parse(e):null}catch(t){return null}},$={profile:sessionStorage.getItem("session")?null===(G=Z())||void 0===G?void 0:G.profile:void 0,walletType:null!==(H=null===(z=Z())||void 0===z?void 0:z.walletType)&&void 0!==H?H:k.NONE},ee=Object(w.b)({name:"user",initialState:$,reducers:{userLogin:function(e,t){return e.profile=t.payload.profile,e.walletType=t.payload.walletType,e},userLogout:function(e){return e.profile=void 0,e.walletType=k.NONE,e},userUpdateProfile:function(e,t){return e.profile=t.payload,e}}}),te=ee.actions,ne=te.userLogin,re=te.userLogout,ae=(te.userUpdateProfile,ee.reducer),oe=n(47),ie=n(59),ce=n(250),se=function(){return Object(ce.a)(40)},ue=function(e){return"0x"+"1DCODE0000".replace(/0/gi,e.toString())},le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=Object(ie.a)(Array(t)).map((function(){return se()})),r=Object(ie.a)(Array(t)).map((function(){return se()}));return{socialAddress:e,following:n,followers:r}},fe=(ue(0),ue(1),ue(2),ue(3),ue(4),ue(5),ue(6),n(398)),de=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(oe.a)({socialAddress:t},fe.activityContent.generateProfile()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=n(63),ge=n(103),he=(n(62),Object(w.b)({name:"feed",initialState:{feed:[]},reducers:{addFeedItem:function(e,t){var n=t.payload;return Object(oe.a)(Object(oe.a)({},e),{},{feed:[].concat(Object(ie.a)(e.feed),[n])})},addFeedItems:function(e,t){var n=t.payload;return Object(oe.a)(Object(oe.a)({},e),{},{feed:[].concat(Object(ie.a)(e.feed),Object(ie.a)(n))})},clearFeedItems:function(e){return Object(oe.a)(Object(oe.a)({},e),{},{feed:[]})}}})),be=he.actions,Ee=be.addFeedItem,Oe=(be.addFeedItems,be.clearFeedItems),we=he.reducer,ye=n(410),Le=n(411),Ne=n(80),ke=Object(w.b)({name:"profiles",initialState:{profiles:{}},reducers:{upsertProfile:function(e,t){var n=t.payload.socialAddress,r=e.profiles[n],a=r?Object(oe.a)(Object(oe.a)({},r),t.payload):t.payload;return{profiles:Object(oe.a)(Object(oe.a)({},e.profiles),{},Object(Ne.a)({},n,a))}},removeProfile:function(e,t){var n=e.profiles,r=t.payload;n[r];return{profiles:Object(ye.a)(n,[r].map(Le.a))}}}}),je=ke.actions,Ce=je.upsertProfile,_e=(je.removeProfile,ke.reducer),xe=n(6),Fe=n(7),Se=function(e){return"function"==typeof e},Be=function(e){return"object"==typeof e&&e.constructor===Uint8Array},Pe=function(){function e(){Object(xe.a)(this,e)}return Object(Fe.a)(e,[{key:"put",value:function(e,t){return Promise.resolve(new URL("".concat("http://localhost:8080","/").concat(e)))}},{key:"putStream",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Ie(t),e.next=3,n(r);case 3:return e.abrupt("return",new URL("".concat("http://localhost:8080","/").concat(t)));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Ie=function(){function e(t){Object(xe.a)(this,e),Object(Ne.a)(this,"chunks",[]),Object(Ne.a)(this,"targetPath",void 0),this.targetPath=t}return Object(Fe.a)(e,[{key:"write",value:function(e,t,n){var r="string"==typeof t?n:t;return this.chunks.push(e),r&&r(null),!0}},{key:"end",value:function(){var e;Be(arguments.length<=0?void 0:arguments[0])&&this.chunks.push(arguments.length<=0?void 0:arguments[0]),e=Se(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:Se(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:arguments.length<=2?void 0:arguments[2];for(var t=this.chunks.reduce((function(e,t){return e+t.length}),0),n=new ArrayBuffer(t),r=new Uint8Array(n),a=0,o=0;a<this.chunks.length;a++)r.set(this.chunks[a],o),o+=this.chunks[a].length;fetch("".concat("http://localhost:8080","/upload?filename=").concat(encodeURIComponent(this.targetPath)),{method:"POST",mode:"cors",body:n}).then((function(t){if(201!==t.status)throw Error("failed to post stream: ".concat(t.status," ").concat(t.statusText));e&&e()}))}}]),e}(),Qe=n(245),Te=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae(t);case 2:if(n=e.sent){e.next=7;break}return e.next=6,de(t);case 6:n=e.sent;case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe(t);case 2:if(n=e.sent){e.next=5;break}throw new Error("Invalid Social Identity Address");case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(t);case 2:if(n=e.sent){e.next=5;break}throw new Error("Invalid Social Identity Address");case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(e){e(Oe()),ve.a.contracts.subscription.subscribeToBatchPublications(Ke(e),{fromBlock:0})},Me=function(e){var t;if(e===k.TORUS)t=D.getWeb3().currentProvider;else{if(e!==k.METAMASK)throw new Error("Unknown walletType attempting to setup provider: ".concat(e));if(!(t=window.ethereum))throw new Error("Could not create provider, because ethereum has not been set")}var n=new ge.providers.Web3Provider(t);Object(ve.b)({provider:n,signer:n.getSigner(),store:new Pe})},Ve=function(e,t,n,r){var a=new TextDecoder,o=n.published?Date.parse(n.published):Math.floor(Date.now()/1e3);e(Ee({fromAddress:a.decode(t.fromId),blockNumber:r,hash:a.decode(t.contentHash),timestamp:o,uri:a.decode(t.url),content:n,inReplyTo:t.announcementType===ve.a.announcements.AnnouncementType.Reply?a.decode(t.inReplyTo):void 0}))},We=function(e,t,n,r){var a=new TextDecoder;e(Ce(Object(oe.a)(Object(oe.a)({},n),{},{socialAddress:a.decode(t.fromId)})))},Ke=function(e){return function(t){ve.a.batch.openURL(t.fileUrl.toString()).then((function(n){return ve.a.batch.readFile(n,(function(n){var r=n,a=(new TextDecoder).decode(r.url);fetch(a).then((function(e){return e.json()})).then((function(n){return function(e,t,n,r){if(Object(Qe.isActivityContentNote)(n))return Ve(e,t,n,r);if(Object(Qe.isActivityContentProfile)(n))return We(e,t,n,r);throw new Error("unknown activity content type: ".concat(JSON.stringify(n)))}(e,r,n,t.blockNumber)})).catch((function(e){return console.log(e)}))}))})).catch((function(e){return console.log(e)}))}},De=Object(w.b)({name:"graphs",initialState:{graphs:[]},reducers:{upsertGraph:function(e,t){var n=t.payload,r=e.graphs.find((function(e){return e.socialAddress===n.socialAddress}));return r&&e.graphs.splice(e.graphs.indexOf(r),1),e.graphs.push(n),e},removeGraph:function(e,t){var n=e.graphs.find((function(e){return e.socialAddress===t.payload}));return n&&e.graphs.splice(e.graphs.indexOf(n),1),e},follow:function(e,t){var n,r,a=t.payload.userAddress,o=t.payload.targetAddress;return null===(n=e.graphs.find((function(e){return e.socialAddress===a})))||void 0===n||n.following.push(o),null===(r=e.graphs.find((function(e){return e.socialAddress===o})))||void 0===r||r.followers.push(a),e},unfollow:function(e,t){var n,r,a=t.payload.userAddress,o=t.payload.targetAddress,i=null===(n=e.graphs.find((function(e){return e.socialAddress===a})))||void 0===n?void 0:n.following,c=null===(r=e.graphs.find((function(e){return e.socialAddress===o})))||void 0===r?void 0:r.followers;return null===i||void 0===i||i.splice(i.indexOf(o)),null===c||void 0===c||c.splice(c.indexOf(a)),e}}}),Ge=De.actions,He=Ge.upsertGraph,ze=(Ge.removeGraph,Ge.follow,Ge.unfollow,De.reducer),Ye=n(240),Je=n.n(Ye),Xe=n(246),Ze=n.n(Xe),$e=function(e){var t=e.popoverVisible,n=e.setPopoverVisible,r=e.loginWalletOptions,o=e.loading,i=e.onButtonClick,c=a.a.createElement(Je.a,{placement:"bottomRight",trigger:"click",visible:t,onVisibleChange:function(e){n(e)},content:a.a.createElement("div",{className:"LoginButton__loginOptions"},a.a.createElement(A.a,{className:"LoginButton__loginTorus",onClick:function(){return i(k.TORUS)}},"Torus"),a.a.createElement(A.a,{className:"LoginButton__loginMetamask",onClick:function(){return i(k.METAMASK)}},"MetaMask"))},a.a.createElement(A.a,{className:"LoginButton__loginButton","aria-label":"Login"},"Log In",o&&a.a.createElement(Ze.a,{className:"LoginButton__spinner",size:"small"}))),s=a.a.createElement(A.a,{className:"LoginButton__loginButton LoginButton__loginButton--quickStart","aria-label":"Login",onClick:function(){return i(r)}},"Log In With ",r,o&&a.a.createElement(Ze.a,{className:"LoginButton__spinner",size:"small"}));return a.a.createElement(a.a.Fragment,null,r===k.NONE?c:s)},et=function(e){var t=e.loginWalletOptions,n=a.a.useState(!1),r=Object(c.a)(n,2),o=r[0],i=r[1],s=a.a.useState(""),f=Object(c.a)(s,2),d=f[0],p=f[1],v=a.a.useState(!1),b=Object(c.a)(v,2),w=b[0],y=b[1],L=E(),N=O((function(e){return e.user.profile})),j=O((function(e){return e.user.walletType})),C=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return i(!0),e.prev=3,e.next=6,J(t).login();case 6:return n=e.sent,e.next=9,Te(n);case 9:return r=e.sent,e.next=12,Ue(r);case 12:return a=e.sent,e.next=15,qe(r);case 15:c=e.sent,L(ne({profile:c,walletType:t})),L(He(a)),s={profile:c,walletType:t},sessionStorage.setItem("session",JSON.stringify(s)),Me(t),i(!1),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),console.log("Error in login:",e.t0);case 26:i(!1),y(!1);case 28:case"end":return e.stop()}var s}),e,null,[[3,23]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",{className:"Login__block"},d&&a.a.createElement(g.a,{className:"Login__alert",type:"error",message:d,banner:!0,closable:!0,onClose:function(){return p("")}}),N?a.a.createElement(a.a.Fragment,null,a.a.createElement(m.a,{count:a.a.createElement(h.a,{style:{color:"#52C41A"}}),offset:[-48,8]},a.a.createElement("img",{className:"Login__walletIcon",src:J(j).icon,alt:"Wallet Symbol"})),a.a.createElement(A.a,{className:"Login__logOutButton","aria-label":"Logout",onClick:function(){sessionStorage.removeItem("session"),j!==k.NONE&&J(j).logout(),L(re())}},"Log Out")):a.a.createElement($e,{popoverVisible:w,setPopoverVisible:y,loginWalletOptions:t,loading:o,onButtonClick:function(e){return C(e)}}))},tt=function(){return a.a.createElement("div",{className:"Header__blockOuter"},a.a.createElement("div",{className:"Header__blockInner"},a.a.createElement("div",null,a.a.createElement("h1",{className:"Header__title"},"Foodee"),a.a.createElement("h2",{className:"Header__subtitle"},"Always in the mood for food")),a.a.createElement(et,{loginWalletOptions:k.NONE})))};!function(e){e[e.FEED=0]="FEED",e[e.MY_POSTS=1]="MY_POSTS",e[e.ALL_POSTS=2]="ALL_POSTS"}(Y||(Y={}));var nt,rt=function(e){var t=e.feedType,n=e.setFeedType,r=function(e){return t===e?"Feed__navigationItem Feed__navigationItem--active":"Feed__navigationItem"};return a.a.createElement("div",{className:"Feed__block"},a.a.createElement("div",{className:"Feed__header"},a.a.createElement("nav",{className:"Feed__navigation"},a.a.createElement("div",{className:r(2),onClick:function(){return n(Y.ALL_POSTS)}},"All Posts"),a.a.createElement("div",{className:r(0),onClick:function(){return n(Y.FEED)}},"Feed"),a.a.createElement("div",{className:r(1),onClick:function(){return n(Y.MY_POSTS)}},"My Posts"))))},at=n(404),ot=n.n(at),it=n(403),ct=new Map([["small",32],["medium",50],["large",100]]),st=function(e){var t=e.profileAddress,n=e.avatarSize,r=e.avatarUrl,o=r||it.create({seed:t}).toDataURL();return a.a.createElement(ot.a,{alt:t||"anonymous",src:o,size:ct.get(n)})};!function(e){e[e.CLOSED=0]="CLOSED",e[e.FOLLOWERS=1]="FOLLOWERS",e[e.FOLLOWING=2]="FOLLOWING"}(nt||(nt={}));var ut,lt=function(e){var t=e.listStatus,n=e.connectionsList,r=e.notFollowingList,o=function(e){var n=r.filter((function(t){return e===t}));return t===nt.FOLLOWERS&&0!==n.length?"Follow":"Unfollow"};return a.a.createElement(a.a.Fragment,null,n.map((function(e){return a.a.createElement("div",{className:"ConnectionsListProfiles__profile",key:e.socialAddress},a.a.createElement(st,{avatarSize:"small",profileAddress:e.socialAddress}),a.a.createElement("div",{className:"ConnectionsListProfiles__name"},e.name||e.socialAddress||"Anonymous"),a.a.createElement(A.a,{className:"ConnectionsListProfiles__button",name:o(e)},o(e),a.a.createElement("div",{className:t===nt.FOLLOWING?"ConnectionsListProfiles__buttonFollowIcon":"ConnectionsListProfiles__buttonUnfollowIcon"},"\u2715")))})))};!function(e){e[e.CLOSED=0]="CLOSED",e[e.FOLLOWERS=1]="FOLLOWERS",e[e.FOLLOWING=2]="FOLLOWING"}(ut||(ut={}));var ft,dt=function(){var e=O((function(e){return e.user.profile})),t=O((function(e){return e.graphs.graphs})).find((function(t){return t.socialAddress===(null===e||void 0===e?void 0:e.socialAddress)})),n=O((function(e){return e.feed.feed})).filter((function(t){return t.fromAddress===(null===e||void 0===e?void 0:e.socialAddress)&&null===t.inReplyTo})).length,o=O((function(e){return e.profiles.profiles})),i=Object(r.useState)(ut.CLOSED),s=Object(c.a)(i,2),f=s[0],d=s[1],A=Object(r.useState)([]),p=Object(c.a)(A,2),m=p[0],v=p[1],g=Object(r.useState)([]),h=Object(c.a)(g,2),b=h[0],w=h[1],y=Object(r.useState)([]),L=Object(c.a)(y,2),N=L[0],k=L[1],j=Object(r.useState)([]),C=Object(c.a)(j,2),_=C[0],x=C[1],F=E(),S=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o[t]){e.next=6;break}return e.next=4,qe(t);case 4:n=e.sent,P(Ce(n));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all((t||[]).map((function(e){return I(e)})));case 2:return r=e.sent,e.next=5,Promise.all((n||[]).map((function(e){return I(e)})));case 5:return a=e.sent,e.abrupt("return",[r,a]);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=Object(r.useCallback)(F,[F]),I=Object(r.useCallback)(S,[o,P]),Q=Object(r.useCallback)(B,[I]);Object(r.useEffect)((function(){t&&Q(t.following,t.followers).then((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];w(n),k(r),x(function(e,t){return t.filter((function(t){return!e.find((function(e){return e.socialAddress===t.socialAddress}))}))}(n,r))}))}),[Q,t]),Object(r.useEffect)((function(){f===ut.FOLLOWING?v(b):f===ut.FOLLOWERS?v(N):v([])}),[f,N,b]);var T=function(e){d(f===e?ut.CLOSED:e)},U=function(e){return f===e?"ConnectionsList__button ConnectionsList__button--active":"ConnectionsList__button"};return a.a.createElement("div",{className:"ConnectionsList__block"},a.a.createElement("div",{className:"ConnectionsList__buttonBlock"},a.a.createElement("button",{className:"ConnectionsList__button"},a.a.createElement("div",{className:"ConnectionsList__buttonCount"},n),"Posts"),a.a.createElement("button",{className:U(ut.FOLLOWERS),onClick:function(){return T(ut.FOLLOWERS)}},a.a.createElement("div",{className:"ConnectionsList__buttonCount"},null===t||void 0===t?void 0:t.followers.length),"Followers"),a.a.createElement("button",{className:U(ut.FOLLOWING),onClick:function(){return T(ut.FOLLOWING)}},a.a.createElement("div",{className:"ConnectionsList__buttonCount"},null===t||void 0===t?void 0:t.following.length),"Following")),a.a.createElement(lt,{listStatus:f,connectionsList:m,notFollowingList:_}))},At=n.p+"static/media/SettingsIcon.e97eac85.svg",pt=n.p+"static/media/ArrowIcon.af02e291.svg",mt=function(){var e=Object(r.useState)(!1),t=Object(c.a)(e,2),n=t[0],o=t[1],i=O((function(e){return e.user.profile}));return a.a.createElement("div",{className:"Profile__block ".concat(n&&"Profile__block--showing")},a.a.createElement("div",{className:"Profile__headerBlock",onClick:function(){return o(!n)}},a.a.createElement("img",{className:"Profile__headerBackArrow ".concat(n&&"Profile__headerBackArrow--rotate"),src:pt,alt:"arrow icon"}),a.a.createElement("div",null,a.a.createElement("label",{className:"Profile__personalInfoLabel--white"},"HANDLE"),a.a.createElement("div",{className:"Profile__handle"},"@","Hans"))),a.a.createElement("div",{className:"Profile__personalInfoBlock"},a.a.createElement("div",{className:"Profile__avatarBlock"},a.a.createElement(st,{profileAddress:null===i||void 0===i?void 0:i.socialAddress,avatarSize:"large",avatarUrl:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Hans_Ulrich_Obrist_2017.jpg/440px-Hans_Ulrich_Obrist_2017.jpg"}),a.a.createElement("div",{className:"Profile__personalInfo"},a.a.createElement("label",{className:"Profile__personalInfoLabel"},"NAME"),a.a.createElement("div",{className:"Profile__name"},"lovetoeat"))),a.a.createElement("img",{className:"Profile__editButton",src:At,alt:"settings icon"})),a.a.createElement(dt,null))},vt=n(247),gt=n.n(vt),ht=n(406),bt=n.n(ht),Et=n(405),Ot=n.n(Et),wt=n(842),yt=n(843),Lt=function(e){var t=e.attachment;return a.a.createElement(bt.a,{nextArrow:a.a.createElement(wt.a,null),prevArrow:a.a.createElement(yt.a,null),dots:!0},null===t||void 0===t?void 0:t.map((function(e,t){var n=e.type.toLowerCase();return a.a.createElement("div",{key:t,className:"PostMedia__cover"},"image"===n&&a.a.createElement("a",{href:e.url[0].href,target:"_blank",rel:"noopener noreferrer"},a.a.createElement("img",{alt:"",className:"PostMedia__img",src:e.url[0].href})),("video"===n||"audio"===n)&&a.a.createElement(Ot.a,{controls:!0,playsinline:!0,className:"PostMedia__img",url:e.url[0].href,width:"100%",height:"video"===n?"100%":55,muted:!0}))})))},Nt=function(e){var t=e.timestamp,n=e.postStyle;return a.a.createElement("p",{className:"RelativeTime ".concat(n?"RelativeTime--post":"")},function(e){var t=new Date,n=new Date(1e3*e),r=(t.getTime()-n.getTime())/1e3;if(r<60)return Math.floor(r)+"s";if(r<3600)return Math.floor(r/60)+"m";if(r<=86400)return Math.floor(r/3600)+"h";if(r>86400){var a=n.getDate(),o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][n.getMonth()],i=n.getFullYear()===t.getFullYear()?"":", ".concat(n.getFullYear());return"".concat(o," ").concat(a).concat(i)}}(t))},kt=n.p+"static/media/CommentIcon.04e756ba.svg",jt=n.p+"static/media/LikeIcon.0e59e73b.svg",Ct=n.p+"static/media/ConnectIcon.2e3b09da.svg",_t=function(e){var t=e.timestamp;return a.a.createElement("div",{className:"ActionsBar__block"},a.a.createElement(Nt,{timestamp:t,postStyle:!0}),a.a.createElement("div",{className:"ActionsBar__iconList"},a.a.createElement("img",{src:jt,alt:"like icon"}),a.a.createElement("img",{src:kt,alt:"comments icon"}),a.a.createElement("img",{src:Ct,alt:"connect icon"})))},xt=function(e){var t=e.feedItem,n=t.content,r=n.attachment&&(Array.isArray(n.attachment)?n.attachment:[n.attachment]);return a.a.createElement(gt.a,{key:t.hash,className:"Post__block",bordered:!1},a.a.createElement(gt.a.Meta,{className:"Post__header",avatar:a.a.createElement(st,{profileAddress:t.fromAddress,avatarSize:"medium"}),title:t.fromAddress,description:a.a.createElement("div",{className:"Post__description"},"@mockHandle__",t.fromAddress)}),a.a.createElement(Lt,{attachment:r}),a.a.createElement("div",{className:"Post__caption"},a.a.createElement(_t,{timestamp:t.timestamp}),a.a.createElement("div",null,n.content),a.a.createElement("div",{className:"Post__captionTags"},t.tags&&t.tags[0])))},Ft=n(407);!function(e){e[e.FEED=0]="FEED",e[e.MY_POSTS=1]="MY_POSTS",e[e.ALL_POSTS=2]="ALL_POSTS"}(ft||(ft={}));var St,Bt=function(e){var t=e.feedType,n=O((function(e){return e.user.profile})),r=O((function(e){return e.graphs.graphs})).find((function(e){return e.socialAddress===(null===n||void 0===n?void 0:n.socialAddress)})),o=O((function(e){return e.feed.feed})).filter((function(e){var t;return"Note"===(null===e||void 0===e||null===(t=e.content)||void 0===t?void 0:t.type)&&void 0===(null===e||void 0===e?void 0:e.inReplyTo)})),i=O((function(e){var t;return(null===(t=e.profiles)||void 0===t?void 0:t.profiles)||{}})),c=[];if(t===ft.FEED){var s=(null===n||void 0===n?void 0:n.socialAddress)?Object(Ne.a)({},n.socialAddress,!0):{};null===r||void 0===r||r.following.forEach((function(e){return s[e]=!0})),c=o.filter((function(e){return(null===e||void 0===e?void 0:e.fromAddress)in s}))}else c=t===ft.MY_POSTS?o.filter((function(e){return(null===n||void 0===n?void 0:n.socialAddress)===(null===e||void 0===e?void 0:e.fromAddress)})):o;c.sort((function(e,t){return e.timestamp-t.timestamp}));var u=c.slice(0).reverse().map((function(e,t){if(!e.fromAddress)throw new Error("no fromAddress in post: ".concat(e));var n=i[e.fromAddress]&&i[e.fromAddress].name?i[e.fromAddress].name:e.fromAddress,r=Object(oe.a)(Object(oe.a)({},e),{},{fromAddress:n,timestamp:e.timestamp,tags:["#foodee"]});return a.a.createElement(xt,{key:t,feedItem:r})}));return a.a.createElement(Ft.a,{breakpointCols:3,className:"PostList__block",columnClassName:"PostList__blockColumn"},u)};!function(e){e[e.FEED=0]="FEED",e[e.MY_POSTS=1]="MY_POSTS",e[e.ALL_POSTS=2]="ALL_POSTS"}(St||(St={}));var Pt=function(){var e=E(),t=O((function(e){return e.user.walletType}));Object(r.useEffect)((function(){t&&t!==k.NONE&&Object(l.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,J(t).reload();case 2:Me(t),e(Re);case 4:case"end":return n.stop()}}),n)})))()}));var n=Object(r.useState)(St.ALL_POSTS),o=Object(c.a)(n,2),i=o[0],s=o[1];return a.a.createElement(f.a,null,a.a.createElement("div",{className:"App"},a.a.createElement(tt,null),a.a.createElement(rt,{feedType:i,setFeedType:s}),a.a.createElement("main",{className:"App__content"},a.a.createElement(Bt,{feedType:i}),a.a.createElement(mt,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var It=Object(w.a)({reducer:{user:ae,profiles:_e,graphs:ze,feed:we}});i.a.render(a.a.createElement(b.a,{store:It},a.a.createElement(Pt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[417,1,2]]]);
//# sourceMappingURL=main.cfe6af39.chunk.js.map